<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bloomify Malaysia</title>
    
    <!-- 1. Load React and ReactDOM from the internet (CDN) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- 2. Load Babel (translates JSX to browser-friendly code) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- 3. Load Tailwind CSS (for styling) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Framer Motion for smooth animations -->
    <script src="https://cdn.jsdelivr.net/npm/framer-motion@10.16.4/dist/framer-motion.js"></script>

    <!-- Custom Animation Styles -->
    <style>
        @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
        }
        .animate-blob {
            animation: blob 7s infinite;
        }
        .animation-delay-2000 {
            animation-delay: 2s;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- 4. Your React Code goes here -->
    <script type="text/babel">
        
        // --- ICONS (Manually added here so you don't need imports) ---
        const Icon = ({ children, size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );
        
        const ShoppingBag = (props) => <Icon {...props}><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><path d="M3 6h18"/><path d="M16 10a4 4 0 0 1-8 0"/></Icon>;
        const Search = (props) => <Icon {...props}><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></Icon>;
        const Menu = (props) => <Icon {...props}><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></Icon>;
        const User = (props) => <Icon {...props}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></Icon>;
        const Star = (props) => <Icon {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></Icon>;
        const Heart = (props) => <Icon {...props}><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></Icon>;
        const ChevronRight = (props) => <Icon {...props}><path d="m9 18 6-6-6-6"/></Icon>;
        const X = (props) => <Icon {...props}><path d="M18 6 6 18"/><path d="m6 6 12 12"/></Icon>;


        // --- FLOATING CHAT WIDGET COMPONENT ---
        const ChatWidget = () => {
            const [isOpen, setIsOpen] = React.useState(false);
            const [messages, setMessages] = React.useState([
                { id: 1, type: 'bot', text: 'Hi there! ðŸ‘‹ How can we help you today?' }
            ]);
            const [inputValue, setInputValue] = React.useState('');
            const [isLiveAgent, setIsLiveAgent] = React.useState(false);
            const [isConnecting, setIsConnecting] = React.useState(false);
            const [hoverScale, setHoverScale] = React.useState(false);

            const messageEndRef = React.useRef(null);

            // Auto-scroll to latest message
            const scrollToBottom = () => {
                messageEndRef.current?.scrollIntoView({ behavior: 'smooth' });
            };

            React.useEffect(() => {
                scrollToBottom();
            }, [messages]);

            // Keyword detection for automatic agent switch
            const agentKeywords = ['human', 'person', 'supervisor', 'agent', 'help', 'support', 'talk to'];

            const shouldSwitchToAgent = (text) => {
                const lowerText = text.toLowerCase();
                return agentKeywords.some(keyword => lowerText.includes(keyword));
            };

            // Handle sending message
            const handleSendMessage = async () => {
                if (!inputValue.trim()) return;

                const userMessage = { id: Date.now(), type: 'user', text: inputValue };
                setMessages(prev => [...prev, userMessage]);

                // Check if message contains agent trigger keywords
                if (!isLiveAgent && shouldSwitchToAgent(inputValue)) {
                    setIsConnecting(true);
                    setIsLiveAgent(true);
                    setMessages(prev => [...prev, {
                        id: Date.now() + 1,
                        type: 'system',
                        text: 'ðŸ”„ Searching for an available agent...'
                    }]);
                    setInputValue('');
                    return;
                }

                setInputValue('');

                // Simulate API delay
                setTimeout(() => {
                    if (isLiveAgent) {
                        // WebSocket or Live Agent API (simulated)
                        setMessages(prev => [...prev, {
                            id: Date.now(),
                            type: 'agent',
                            text: 'Thanks for your message! A live agent will be with you shortly.'
                        }]);
                    } else {
                        // AI API response (simulated)
                        const responses = [
                            'That\'s a great question! Let me help you with that.',
                            'I understand. Here\'s what I can help you with...',
                            'Thanks for reaching out! I\'m here to assist.',
                            'Based on what you said, I\'d recommend...'
                        ];
                        const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                        setMessages(prev => [...prev, {
                            id: Date.now(),
                            type: 'bot',
                            text: randomResponse
                        }]);
                    }
                    setIsConnecting(false);
                }, 800);
            };

            const handleTalkToHuman = () => {
                setIsConnecting(true);
                setIsLiveAgent(true);
                setMessages(prev => [...prev, {
                    id: Date.now(),
                    type: 'system',
                    text: 'ðŸ”„ Connecting to an agent...'
                }]);
                setTimeout(() => setIsConnecting(false), 2000);
            };

            const handleKeyDown = (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    handleSendMessage();
                }
            };

            // Chat icon (simple SVG)
            const ChatIcon = () => (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
            );

            return (
                <div className="fixed bottom-6 right-6 z-40 font-sans">
                    {/* Chat Window */}
                    {isOpen && (
                        <div
                            className="absolute bottom-20 right-0 w-96 bg-white rounded-lg shadow-2xl flex flex-col overflow-hidden border border-gray-200 animate-in fade-in zoom-in-95 origin-bottom-right"
                            style={{ animation: 'slideUp 0.3s ease-out' }}
                        >
                            {/* Header */}
                            <div className={`${isLiveAgent ? 'bg-gradient-to-r from-blue-500 to-blue-600' : 'bg-gradient-to-r from-pink-400 to-pink-500'} text-white p-4 flex justify-between items-center`}>
                                <div>
                                    <h3 className="font-bold text-sm">
                                        {isLiveAgent ? 'ðŸ‘¤ Live Agent Support' : 'ðŸ¤– Bloomify AI Assistant'}
                                    </h3>
                                    <p className="text-xs opacity-90 mt-0.5">
                                        {isConnecting ? 'Connecting...' : (isLiveAgent ? 'Connected to an agent' : 'Always here to help')}
                                    </p>
                                </div>
                                <button
                                    onClick={() => setIsOpen(false)}
                                    className="p-1 hover:bg-white/20 rounded transition-colors"
                                >
                                    <X size={18} />
                                </button>
                            </div>

                            {/* Messages */}
                            <div className="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 max-h-96">
                                {messages.map(msg => (
                                    <div
                                        key={msg.id}
                                        className={`flex ${msg.type === 'user' ? 'justify-end' : 'justify-start'}`}
                                    >
                                        <div
                                            className={`max-w-xs px-4 py-2 rounded-lg text-sm ${
                                                msg.type === 'user'
                                                    ? 'bg-pink-400 text-white rounded-br-none'
                                                    : msg.type === 'system'
                                                    ? 'bg-blue-100 text-blue-900 rounded-bl-none italic'
                                                    : msg.type === 'agent'
                                                    ? 'bg-blue-100 text-blue-900 rounded-bl-none'
                                                    : 'bg-white border border-gray-200 text-gray-800 rounded-bl-none'
                                            }`}
                                        >
                                            {msg.text}
                                        </div>
                                    </div>
                                ))}
                                <div ref={messageEndRef} />
                            </div>

                            {/* Action Button (Talk to Human) - Only show if NOT live agent */}
                            {!isLiveAgent && (
                                <div className="px-4 py-2 border-t border-gray-200 bg-white">
                                    <button
                                        onClick={handleTalkToHuman}
                                        className="w-full text-xs text-blue-600 hover:text-blue-800 font-medium py-2 rounded hover:bg-blue-50 transition-colors"
                                    >
                                        ðŸ’¬ Talk to a Human Agent
                                    </button>
                                </div>
                            )}

                            {/* Input Area */}
                            <div className="p-4 border-t border-gray-200 bg-white">
                                <div className="flex gap-2">
                                    <input
                                        type="text"
                                        value={inputValue}
                                        onChange={(e) => setInputValue(e.target.value)}
                                        onKeyDown={handleKeyDown}
                                        placeholder="Type a message..."
                                        className="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-pink-400 focus:ring-1 focus:ring-pink-400 text-sm"
                                        disabled={isConnecting}
                                    />
                                    <button
                                        onClick={handleSendMessage}
                                        disabled={isConnecting || !inputValue.trim()}
                                        className="px-4 py-2 bg-pink-400 text-white rounded-lg hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-medium"
                                    >
                                        Send
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Floating Button */}
                    <style>{`
                        @keyframes slideUp {
                            from {
                                opacity: 0;
                                transform: translateY(20px);
                            }
                            to {
                                opacity: 1;
                                transform: translateY(0);
                            }
                        }
                    `}</style>

                    <button
                        onClick={() => setIsOpen(!isOpen)}
                        onMouseEnter={() => setHoverScale(true)}
                        onMouseLeave={() => setHoverScale(false)}
                        className={`w-14 h-14 rounded-full shadow-lg flex items-center justify-center text-white font-bold text-lg transition-all duration-300 ${
                            isLiveAgent
                                ? 'bg-gradient-to-br from-blue-500 to-blue-600 hover:shadow-xl'
                                : 'bg-gradient-to-br from-pink-400 to-pink-500 hover:shadow-xl'
                        }`}
                        style={{
                            transform: hoverScale ? 'scale(1.1)' : 'scale(1)',
                            cursor: 'pointer'
                        }}
                    >
                        <ChatIcon />
                    </button>
                </div>
            );
        };



        // --- PROMO POPUP COMPONENT ---
        const PromoPopup = ({ show, onClose }) => {
            if (!show) return null;

            // Show simulation alert before closing
            const handleCloseWithAlert = () => {
                alert('Just a simulation for advertisement, no promo page available');
                onClose();
            };

            return (
                <div className="fixed inset-0 z-[9999] flex items-center justify-center">
                    <div className="absolute inset-0 bg-black/70" onClick={handleCloseWithAlert}></div>

                    <div className="relative bg-white rounded-2xl p-8 max-w-2xl w-full mx-4 shadow-2xl">
                        <button
                            aria-label="Close promo"
                            className="absolute top-4 right-4 p-2 text-pink-600 hover:text-pink-900"
                            onClick={handleCloseWithAlert}
                        >
                            <X size={20} />
                        </button>

                        <img
                            src="Gemini_Generated_Image_pdfc86pdfc86pdfc.png"
                            alt="Promo"
                            className="w-full h-80 object-cover rounded-lg mb-6 cursor-pointer"
                            onClick={() => alert('Just a simulation for advertisement, no promo page available')}
                        />

                        <div className="flex items-center justify-between">
                            <div className="text-base text-gray-700">Get 15% off your first order â€” use code <span className="font-bold">BLOOMERS15</span></div>

                            <div className="flex items-center gap-2">
                                <button
                                    className="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg text-sm font-medium"
                                    onClick={handleCloseWithAlert}
                                >
                                    Maybe later
                                </button>
                                <button
                                    className="bg-pink-400 text-white px-6 py-2 rounded-lg text-sm font-medium hover:bg-pink-500"
                                    onClick={handleCloseWithAlert}
                                >
                                    Close
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- MAIN APP COMPONENT ---
        const App = () => {
            const [activeCategory, setActiveCategory] = React.useState('All');
            const [isMenuOpen, setIsMenuOpen] = React.useState(false);
            const [activeTab, setActiveTab] = React.useState('ranking');

            // Local storage helpers for shared cart with `shopping_cart.html`
            const loadCart = () => {
                try {
                    const raw = localStorage.getItem('bloomifyCart');
                    return raw ? JSON.parse(raw) : [];
                } catch (e) { return []; }
            };
            const saveCart = (cart) => {
                try { localStorage.setItem('bloomifyCart', JSON.stringify(cart)); } catch (e) {}
            };

            // Cart count is derived from localStorage so both pages stay in sync
            const [cartCount, setCartCount] = React.useState(() => loadCart().reduce((s,i)=>s+ (i.quantity||1),0));

            // Keep header count in sync if other tabs update localStorage
            React.useEffect(() => {
                const onStorage = (e) => {
                    if (e.key === 'bloomifyCart') {
                        setCartCount(loadCart().reduce((s,i)=>s+ (i.quantity||1),0));
                    }
                };
                window.addEventListener('storage', onStorage);
                return () => window.removeEventListener('storage', onStorage);
            }, []);

            // Always show popup by default (permanent popup)
            const [showPopup, setShowPopup] = React.useState(true);

            const handleClosePopup = () => {
                setShowPopup(false);
            };

            // Promo click handler for demo banners (no promo page)
            const handlePromoClick = () => {
                alert('Just a simulation for advertisement, no promo page available');
            };

            // Simple toast for Add to Cart feedback (clears automatically)
            const [toast, setToast] = React.useState('');

            // Search query state and handler â€” navigates to `search_bloomify.html` with query
            const [searchQuery, setSearchQuery] = React.useState('');
            const handleSearch = (q) => {
                const query = (typeof q === 'string' ? q : searchQuery || '').trim();
                if (!query) return; // do nothing on empty
                const url = `search_bloomify.html?q=${encodeURIComponent(query)}`;
                window.location.href = url;
            };
            React.useEffect(() => {
                if (!toast) return;
                const t = setTimeout(() => setToast(''), 1800);
                return () => clearTimeout(t);
            }, [toast]);

            // Hero carousel images (auto-rotating every 3s), with manual controls and pause-on-hover
            const heroImages = [
                "download%20(72).webp?auto=format&fit=crop&q=80&w=800",
                "download%20(74).webp",
                "JOOCYEE%20Behind%20The%20Scene%20with%20HEESEUNG%20(210925).webp",
                "rei%20ive.webp"
            ];

            const [heroIndex, setHeroIndex] = React.useState(0);
            const [isPaused, setIsPaused] = React.useState(false);

            const nextHero = React.useCallback(() => setHeroIndex(i => (i + 1) % heroImages.length), [heroImages.length]);
            const prevHero = React.useCallback(() => setHeroIndex(i => (i - 1 + heroImages.length) % heroImages.length), [heroImages.length]);

            // Auto rotate every 3000ms (3s) unless paused
            React.useEffect(() => {
                if (isPaused) return;
                const id = setInterval(() => nextHero(), 3000);
                return () => clearInterval(id);
            }, [nextHero, isPaused]);

            // Mock Data for Products
            const products = [
                {
                    id: 1,
                    brand: "COSRX",
                    name: "Advanced Snail 96 Mucin Power Essence",
                    price: 48.00,
                    originalPrice: 62.00,
                    rating: 4.8,
                    reviews: 1240,
                    image: "COSRX%20Advanced%20Snail%2092%20All%20In%20One%20Cream%20100mL%20_%20OLIVE%20YOUNG%20Global.webp",
                    tag: "Best Seller",
                    category: "Skincare"
                },
                {
                    id: 2,
                    brand: "Hince",
                    name: "Hince Cover Master Pink Cushion",
                    price: 110.20,
                    originalPrice: 139.90,
                    rating: 4.9,
                    reviews: 967,
                    image: "08b4ee01-fed2-4a17-a318-02e7fd529075.webp",
                    tag: "Trending",
                    category: "Makeup"
                },
                {
                    id: 3,
                    brand: "Innisfree",
                    name: "INNISFREE Retinol Cica Repair Ampoule 30ml Double Pack",
                    price: 130.20,
                    originalPrice: 156.00,
                    rating: 4.7,
                    reviews: 1200,
                    image: "ac336422-1ce1-48b9-b78c-ee2e09fd5e89.webp",
                    tag: "Staff Pick",
                    category: "Skincare"
                },
                {
                    id: 4,
                    brand: "Clio",
                    name: "Kill Cover Mesh Glow Cushion",
                    price: 131.40,
                    originalPrice: 155.93,
                    rating: 4.6,
                    reviews: 540,
                    image: "03d04c7c-4b79-4fc3-bb2e-4dfa30a356b9.webp",
                    tag: "Trending",
                    category: "Makeup"
                },
                {
                    id: 5,
                    brand: "Beauty of Joseon",
                    name: "Glow Serum: Propolis + Niacinamide",
                    price: 59.00,
                    originalPrice: 68.70,
                    rating: 4.8,
                    reviews: 2100,
                    image: "d0f29dc9-1d01-46d6-9de9-9008a14a41d6.webp",
                    tag: "Staff Pick",
                    category: "Skincare"
                },
                {
                    id: 6,
                    brand: "Mediheal",
                    name: "Mediheal Cotton Facial Toner Pad",
                    price: 103.99,
                    originalPrice: 149.90,
                    rating: 4.5,
                    reviews: 1067,
                    image: "MEDIHEAL%20Madecassoside%20Cotton%20Facial%20Pads%20-%20Toner%20Pads%20with%20Centella%20Asiatica%20to%20Improve%20Uneven%20Skin%20Tone%20-%20Vegan%20Face%20Gauze%20Pads,%20100%20Pads.webp",
                    tag: "Sale",
                    category: "Skincare"
                },
                {
                    id: 7,
                    brand: "SKIN1004",
                    name: "Madagascar Centella Ampoule",
                    price: 33.40,
                    originalPrice: 41.70,
                    rating: 4.5,
                    reviews: 1997,
                    image: "download%20(73).webp",
                    tag: "Best Seller",
                    category: "Skincare"
                },
                {
                    id: 8,
                    brand: "Peripera",
                    name: "Ink Mood Glowy Tint",
                    price: 42.10,
                    originalPrice: 45.90,
                    rating: 4.5,
                    reviews: 890,
                    image: "ef81a3b2-2c0b-4534-8e1b-618389cf11f8.webp",
                    tag: "Sale",
                    category: "Makeup"
                }
            ];

            // --- Autocomplete / Suggestions for search input ---
            const [highlightIndex, setHighlightIndex] = React.useState(-1);
            const [showSuggestions, setShowSuggestions] = React.useState(false);
            const suggestions = React.useMemo(() => {
                const q = (searchQuery || '').trim().toLowerCase();
                if (!q) return [];
                return products.filter(p => (p.name + ' ' + p.brand + ' ' + p.tag + ' ' + p.category).toLowerCase().includes(q)).slice(0,6);
            }, [searchQuery, products]);

            React.useEffect(() => { setHighlightIndex(-1); }, [suggestions.length]);

            const handleKeyDownSearch = (e) => {
                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    setHighlightIndex(i => Math.min(i + 1, suggestions.length - 1));
                    setShowSuggestions(true);
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    setHighlightIndex(i => Math.max(i - 1, 0));
                    setShowSuggestions(true);
                } else if (e.key === 'Enter') {
                    e.preventDefault();
                    if (highlightIndex >= 0 && suggestions[highlightIndex]) {
                        handleSearch(suggestions[highlightIndex].name);
                    } else {
                        handleSearch();
                    }
                } else if (e.key === 'Escape') {
                    setHighlightIndex(-1);
                    setShowSuggestions(false);
                }
            };

            const categories = ["All", "Skincare", "Makeup", "Body", "Men--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- "];

            const filteredProducts = activeCategory === 'All' 
                ? products 
                : products.filter(p => p.category === activeCategory);

            const addToCart = (product) => {
                if (!product) return;
                const cart = loadCart();
                const existing = cart.find(i => i.id === product.id);
                if (existing) {
                    existing.quantity = (existing.quantity || 1) + 1;
                } else {
                    cart.push({
                        id: product.id,
                        name: product.name,
                        brand: product.brand,
                        price: product.price,
                        image: product.image,
                        quantity: 1
                    });
                }
                saveCart(cart);
                setCartCount(cart.reduce((s,i)=>s+(i.quantity||1),0));
                // show temporary toast instead of redirecting
                try { setToast('Added to cart'); } catch (e) { /* ignore */ }
            };

            return (
                <div className="font-sans text-gray-800 bg-white min-h-screen">
                {/* Floating Chat Widget */}
                <ChatWidget />
                
                {/* Popup */}
                <PromoPopup show={showPopup} onClose={handleClosePopup} />
                {toast && (
                    <div className="fixed bottom-6 right-6 bg-gray-900 text-white px-4 py-2 rounded shadow-md z-50">
                        {toast}
                    </div>
                )}
                {/* Top Banner */}
                <div className="bg-pink-400 text-white text-xs text-center py-2 px-4">
                    New Members get <span className="font-bold">15% OFF</span> their first order with code: BLOOMERS15
                </div>

                {/* Navbar */}
                <nav className="sticky top-0 z-50 bg-white border-b border-gray-100 shadow-sm">
                    <div className="max-w-6xl mx-auto px-4">
                    <div className="flex justify-between items-center h-16">
                        {/* Mobile Menu Button */}
                        <button 
                        className="md:hidden p-2"
                        onClick={() => setIsMenuOpen(!isMenuOpen)}
                        >
                        {isMenuOpen ? <X size={24} /> : <Menu size={24} />}
                        </button>

                        {/* Logo */}
                        <div className="text-2xl font-bold text-pink-400 tracking-tight flex-shrink-0 cursor-pointer">
                        BLOOMIFY
                        </div>

                        {/* Search Bar - Hidden on mobile, visible on desktop */}
                        <div className="hidden md:flex flex-1 max-w-lg mx-8 relative">
                        <div className="relative w-full">
                        <input 
                            type="text" 
                            placeholder="Search for brand, product, etc..." 
                            value={searchQuery}
                            onChange={(e) => setSearchQuery(e.target.value)}
                            onKeyDown={handleKeyDownSearch}
                            onFocus={() => setShowSuggestions(true)}
                            onBlur={() => setTimeout(() => setShowSuggestions(false), 150)}
                            className="w-full bg-gray-50 border border-gray-200 rounded-full py-2 pl-4 pr-10 focus:outline-none focus:border-pink-400 focus:ring-1 focus:ring-pink-400 transition-all"
                        />
                        <button type="button" onClick={() => handleSearch()} className="absolute right-3 top-2.5 text-gray-400 hover:text-pink-600">
                            <Search size={20} />
                        </button>

                        {showSuggestions && suggestions.length > 0 && (
                            <ul className="absolute left-0 right-0 mt-2 bg-white border border-gray-200 rounded-md shadow-lg z-50 max-h-60 overflow-auto">
                                {suggestions.map((s, idx) => (
                                    <li 
                                        key={s.id}
                                        onMouseDown={() => { handleSearch(s.name); }}
                                        onMouseEnter={() => setHighlightIndex(idx)}
                                        className={`px-4 py-2 cursor-pointer ${idx === highlightIndex ? 'bg-pink-50' : 'hover:bg-gray-50'}`}
                                    >
                                        <div className="text-sm font-medium text-gray-900">{s.name}</div>
                                        <div className="text-xs text-gray-500">{s.brand} Â· {s.category}</div>
                                    </li>
                                ))}
                            </ul>
                        )}
                        </div>
                        </div>

                        {/* Icons */}
                        <div className="flex items-center gap-4">
                        <nav>
                            <a href="login_signup.html" className="hidden md:flex items-center gap-1 text-gray-600 hover:text-pink-600 text-sm font-medium">
                            <User size={20} />
                            <span>Login / Sign Up</span>
                            </a>
                        </nav>
                        <nav>
                        <a href="shopping_cart.html" className="relative text-gray-600 hover:text-pink-600">
                            <ShoppingBag size={24} />
                            {cartCount > 0 && (
                            <span className="absolute -top-1 -right-1 bg-rose-500 text-white text-[10px] font-bold w-4 h-4 rounded-full flex items-center justify-center">
                                {cartCount}
                            </span>
                            )}
                        </a>
                        </nav>
                        </div>
                    </div>
                    </div>

                    {/* Mobile Search (Visible only on mobile) */}
                    <div className="md:hidden px-4 pb-3">
                    <div className="relative">
                        <input 
                        type="text" 
                        placeholder="Search..." 
                        value={searchQuery}
                        onChange={(e) => setSearchQuery(e.target.value)}
                        onKeyDown={(e) => { if (e.key === 'Enter') handleSearch(); }}
                        className="w-full bg-gray-50 border border-gray-200 rounded-lg py-2 pl-3 pr-10 text-sm"
                        />
                        <button type="button" onClick={() => handleSearch()} className="absolute right-3 top-2.5 text-gray-400">
                            <Search size={16} />
                        </button>
                    </div>
                    </div>

                    {/* Secondary Nav - Categories */}
                    <div className={`md:block ${isMenuOpen ? 'block' : 'hidden'} border-t border-gray-100`}>
                    <div className="max-w-6xl mx-auto px-4">
                        <ul className="flex flex-col md:flex-row md:gap-8 text-sm font-medium text-gray-600 py-2">
                        {categories.map(cat => (
                            <li key={cat}>
                            <button 
                                onClick={() => setActiveCategory(cat)}
                                className={`py-2 px-2 hover:text-pink-800 transition-colors w-full text-left md:w-auto ${activeCategory === cat ? 'text-pink-500 font-bold border-l-4 md:border-l-0 md:border-b-2 border-pink-500 md:bg-transparent bg-pink-50' : ''}`}
                            >
                                {cat}
                            </button>
                            </li>
                        ))}
                        </ul>
                    </div>
                    </div>
                </nav>

                {/* Hero Section */}
                <header className="relative bg-pink-100 overflow-hidden">
                    <div className="max-w-6xl mx-auto md:flex items-center">
                    <div className="md:w-1/2 p-8 md:p-16 space-y-4 relative z-10">
                        <span className="inline-block px-3 py-1 bg-pink-100 text-pink-600 text-xs font-bold rounded-full uppercase tracking-wider">
                        Newly Launched
                        </span>
                        <h1 className="text-4xl md:text-5xl font-bold leading-tight text-gray-900">
                        Achieve Your<br/>Dream Skin!
                        </h1>
                        <p className="text-gray-600 text-lg">
                        Discover the top K-Beauty trends curated just for you. 
                        Get that inner glow with our best-selling serums.
                        </p>
                        <div className="pt-4 flex gap-4">
                        <button className="bg-pink-400 hover:bg-pink-400 text-white px-8 py-3 rounded-full font-medium transition-all shadow-lg hover:shadow-xl">
                            Shop Now
                        </button>
                        <button className="border border-gray-300 hover:border-pink-700 hover:text-pink-700 px-8 py-3 rounded-full font-medium transition-all">
                            View Trends
                        </button>
                        </div>
                    </div>
                    <div className="md:w-1/2 h-64 md:h-96 bg-pink-50 relative">
                        {/* Abstract shape background */}
                        <div className="absolute top-0 right-0 w-64 h-64 bg-pink-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"></div>
                        <div className="absolute -bottom-8 left-0 w-64 h-64 bg-pink-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"></div>
                        
                        <div
                        className="w-full h-full relative overflow-hidden"
                        onMouseEnter={() => setIsPaused(true)}
                        onMouseLeave={() => setIsPaused(false)}
                        >
                            <div
                                className="flex h-full"
                                style={{
                                    width: `${heroImages.length * 100}%`,
                                    transform: `translateX(-${(heroIndex * 100) / heroImages.length}%)`,
                                    transition: 'transform 600ms ease'
                                }}
                            >
                                {heroImages.map((src, idx) => (
                                    <img
                                        key={idx}
                                        src={src}
                                        alt={`Hero ${idx + 1}`}
                                        className="w-full h-full object-cover bg-center flex-shrink-0"
                                        style={{ width: `${100 / heroImages.length}%` }}
                                        onError={(e) => { e.target.onerror = null; e.target.src = 'https://placehold.co/800x600/eee/999?text=Image'; }}
                                    />
                                ))}
                            </div>

                            {/* Prev/Next buttons */}
                            <button onClick={() => { prevHero(); }} className="absolute left-3 top-1/2 -translate-y-1/2 bg-white/80 p-2 rounded-full shadow-md hover:bg-white">
                                <span className="sr-only">Previous</span>
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m15 18-6-6 6-6"/></svg>
                            </button>
                            <button onClick={() => { nextHero(); }} className="absolute right-3 top-1/2 -translate-y-1/2 bg-white/80 p-2 rounded-full shadow-md hover:bg-white">
                                <span className="sr-only">Next</span>
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m9 18 6-6-6-6"/></svg>
                            </button>

                            {/* Dots */}
                            <div className="absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-2">
                                {heroImages.map((_, i) => (
                                    <button key={i} onClick={() => setHeroIndex(i)} className={`w-2 h-2 rounded-full ${heroIndex === i ? 'bg-pink-500' : 'bg-white/70'}`}></button>
                                ))}
                            </div>
                        </div>
                    </div>
                    </div>
                </header>

                {/* Main Content Area */}
                <main className="max-w-6xl mx-auto px-4 py-12">
                    
                    {/* Tab Navigation for Lists */}
                    <div className="flex flex-col md:flex-row justify-between items-end mb-8 gap-4">
                    <div>
                        <h2 className="text-2xl font-bold text-gray-900">Bloomify Fav Picks</h2>
                        <p className="text-gray-500 mt-1">Find Out The Trending Skincare!</p>
                    </div>
                    <div className="flex bg-watemelon pink-100 p-1 rounded-lg">
                        {['Ranking', 'Sales', 'New'].map(tab => (
                        <button
                            key={tab}
                            onClick={() => setActiveTab(tab)}
                            className={`px-6 py-2 rounded-md text-sm font-medium capitalize transition-all ${
                            activeTab === tab 
                                ? 'bg-white text-teal-700 shadow-sm' 
                                : 'text-gray-500 hover:text-gray-700'
                            }`}
                        >
                            {tab}
                        </button>
                        ))}
                    </div>
                    </div>

                    {/* Product Grid */}
                    <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                    {filteredProducts.map((product) => (
                        <a key={product.id} href={`product_detail.html?id=${product.id}`} className="group bg-white rounded-xl border border-gray-100 hover:border-pink-200 hover:shadow-lg transition-all duration-300 flex flex-col overflow-hidden relative no-underline text-inherit">
                        
                        {/* Badge */}
                        <div className="absolute top-3 left-3 z-10">
                            <span className="bg-white/90 backdrop-blur text-teal-800 text-[10px] font-bold px-2 py-1 rounded shadow-sm border border-teal-50">
                            {product.tag}
                            </span>
                        </div>

                        {/* Like Button */}
                        <button className="absolute top-3 right-3 z-10 p-2 bg-white/50 hover:bg-white rounded-full text-gray-400 hover:text-rose-500 transition-colors">
                            <Heart size={16} />
                        </button>

                        {/* Image */}
                        <div className="aspect-[4/5] overflow-hidden bg-gray-100 relative">
                            <img 
                            src={product.image} 
                            alt={product.name} 
                            className="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                            />
                            
                            {/* Quick Add Overlay - Desktop */}
                            <div className="absolute bottom-0 left-0 right-0 p-4 translate-y-full group-hover:translate-y-0 transition-transform duration-300 hidden md:block">
                            <button 
                                onClick={(e) => { e.preventDefault(); addToCart(product); }}
                                className="w-full bg-pink-400 text-white py-3 rounded-lg font-medium shadow-lg hover:bg-pink-800 flex items-center justify-center gap-2"
                            >
                                <ShoppingBag size={18} /> Add to Cart
                            </button>
                            </div>
                        </div>

                        {/* Details */}
                        <div className="p-4 flex flex-col flex-1">
                            <div className="text-xs text-gray-500 font-bold mb-1 uppercase tracking-wide">{product.brand}</div>
                            <h3 className="font-medium text-gray-900 leading-snug mb-2 line-clamp-2 hover:text-teal-700 cursor-pointer">
                            {product.name}
                            </h3>
                            
                            <div className="mt-auto">
                            <div className="flex items-center gap-1 mb-2">
                                <Star size={14} className="fill-yellow-400 text-yellow-400" />
                                <span className="text-xs font-bold text-gray-700">{product.rating}</span>
                                <span className="text-xs text-gray-400">({product.reviews})</span>
                            </div>
                            
                            <div className="flex items-baseline gap-2">
                                <span className="text-lg font-bold text-gray-900">RM {product.price.toFixed(2)}</span>
                                {product.originalPrice > product.price && (
                                <span className="text-sm text-gray-400 line-through">RM {product.originalPrice.toFixed(2)}</span>
                                )}
                                {product.originalPrice > product.price && (
                                <span className="text-xs font-bold text-rose-500">
                                    {Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100)}% OFF
                                </span>
                                )}
                            </div>
                            </div>

                            {/* Mobile Add Button */}
                            <button 
                            onClick={(e) => { e.preventDefault(); addToCart(product); }}
                            className="mt-3 w-full md:hidden border border-teal-600 text-teal-700 py-2 rounded-lg text-sm font-medium active:bg-teal-50"
                            >
                            Add to Cart
                            </button>
                        </div>
                        </a>
                    ))}
                    </div>

                    {/* Promo Banners Middle */}
                    <div className="grid md:grid-cols-2 gap-4 mt-16">
                        {/* PROMO BOX 1: Sale */}
                        <a href="search_bloomify.html?q=Sale" className="bg-rose-50 rounded-2xl p-8 flex flex-col justify-center items-start min-h-[200px] hover:bg-rose-100 transition-colors">
                            <span className="text-rose-500 font-bold text-sm mb-2">HOT DEAL</span>
                            <h3 className="text-2xl font-bold text-gray-900 mb-4">Check Out Our <br/>On Sale Products</h3>
                            {/* Note: I'm keeping the button here, but since the whole <a> element is clickable, the button is mostly for styling/icon */}
                            <div className="flex items-center gap-2 text-gray-900 font-medium border-b border-gray-900 pb-0.5 hover:text-rose-600 hover:border-rose-600 transition-all">
                                Shop Sale <ChevronRight size={16} />
                            </div>
                        </a>
    
                        {/* PROMO BOX 2: Serum Collection */}
                        <a href="search_bloomify.html?q=Serum" className="bg-rose-50 rounded-2xl p-8 flex flex-col justify-center items-start min-h-[200px] hover:bg-rose-100 transition-colors">
                            <span className="text-rose-500 font-bold text-sm mb-2">NEW ARRIVAL</span>
                            <h3 className="text-2xl font-bold text-gray-900 mb-4">Serum <br/>Collection</h3>
                            <div className="flex items-center gap-2 text-gray-900 font-medium border-b border-gray-900 pb-0.5 hover:text-rose-600 hover:border-rose-600 transition-all">
                                Discover <ChevronRight size={16} />
                            </div>
                        </a>
                    </div>

                </main>

                {/* Footer */}
                <footer className="bg-gray-900 text-white py-12">
                    <div className="max-w-6xl mx-auto px-4 grid grid-cols-1 md:grid-cols-4 gap-8">
                    <div>
                        <div className="text-2xl font-bold mb-4">BLOOMIFY</div>
                        <p className="text-gray-400 text-sm">
                        Your daily dose of beauty. Curated K-Beauty brands and health supplements delivered to your door.
                        </p>
                    </div>
                    <div>
                        <h4 className="font-bold mb-4 text-gray-200">Customer Service</h4>
                        <ul className="space-y-2 text-sm text-gray-400">
                        <li className="hover:text-white cursor-pointer">Help Center</li>
                        <li className="hover:text-white cursor-pointer">Shipping & Returns</li>
                        <li className="hover:text-white cursor-pointer">My Account</li>
                        </ul>
                    </div>
                    <div>
                        <h4 className="font-bold mb-4 text-gray-200">About Us</h4>
                        <ul className="space-y-2 text-sm text-gray-400">
                        <li className="hover:text-white cursor-pointer">Our Story</li>
                        <li className="hover:text-white cursor-pointer">Careers</li>
                        <li className="hover:text-white cursor-pointer">Sustainability</li>
                        </ul>
                    </div>
                    <div>
                        <h4 className="font-bold mb-4 text-gray-200">Stay in the loop</h4>
                        <div className="flex gap-2">
                        <input type="email" placeholder="Enter email" className="bg-gray-800 border-none text-white text-sm p-2 rounded w-full" />
                        <button className="bg-pink-500 px-4 rounded text-sm font-medium hover:bg-pink-400">Sub</button>
                        </div>
                    </div>
                    </div>
                    <div className="max-w-6xl mx-auto px-4 mt-12 pt-8 border-t border-gray-800 text-center text-xs text-gray-500">
                    Â© 2025 Bloomify. All rights reserved. Just a mockup assignment for MKT667.
                    </div>
                </footer>
                </div>
            );
        };

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>